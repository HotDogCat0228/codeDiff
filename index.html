<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>程式碼比對工具</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>程式碼比對工具</h1>
            <div class="controls">
                <button id="copyLeft" class="btn btn-info">複製左側</button>
                <button id="copyRight" class="btn btn-info">複製右側</button>
                <button id="toggleWheelSync" class="btn btn-success" title="切換滾輪同步滾動">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 3v18m9-9H3"></path>
                    </svg>
                    同步滾動
                </button>
                <button id="clearLeft" class="btn btn-secondary">清除左側</button>
                <button id="clearRight" class="btn btn-secondary">清除右側</button>
                <button id="clearBoth" class="btn btn-danger">清除全部</button>
                <button id="compare" class="btn btn-primary">開始比對</button>
            </div>
        </header>

        <div class="input-section">
            <div class="code-panel">
                <div class="panel-header">
                    <h3>程式碼 A</h3>
                    <button class="copy-panel-btn" id="copyPanelLeft" title="複製此面板的程式碼">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                    </button>
                </div>
                <div class="file-upload-section">
                    <input type="file" id="fileInputLeft" accept=".js,.ts,.jsx,.tsx,.html,.css,.scss,.less,.py,.java,.cpp,.c,.h,.php,.rb,.go,.rs,.swift,.kt,.scala,.sh,.sql,.json,.xml,.yaml,.yml,.md,.txt" />
                    <label for="fileInputLeft" class="file-upload-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14,2 14,8 20,8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10,9 9,9 8,9"></polyline>
                        </svg>
                        上傳文件
                    </label>
                    <span class="file-name" id="fileNameLeft">未選擇文件</span>
                    <button type="button" class="clear-file-btn" id="clearFileLeft" style="display: none;">✕</button>
                </div>
                <div class="code-editor" id="codeEditorLeft">
                    <div class="line-numbers" id="lineNumbersLeft"></div>
                    <div class="diff-highlight" id="diffHighlightLeft"></div>
                    <textarea id="codeLeft" placeholder="在此輸入程式碼或上傳文件..." spellcheck="false" autocorrect="off" autocapitalize="off"></textarea>
                </div>
            </div>
            
            <div class="diff-connector" id="diffConnector">
                <!-- 動態生成的連接線將在這裡顯示 -->
            </div>
            
            <div class="code-panel">
                <div class="panel-header">
                    <h3>程式碼 B</h3>
                    <button class="copy-panel-btn" id="copyPanelRight" title="複製此面板的程式碼">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                    </button>
                </div>
                <div class="file-upload-section">
                    <input type="file" id="fileInputRight" accept=".js,.ts,.jsx,.tsx,.html,.css,.scss,.less,.py,.java,.cpp,.c,.h,.php,.rb,.go,.rs,.swift,.kt,.scala,.sh,.sql,.json,.xml,.yaml,.yml,.md,.txt" />
                    <label for="fileInputRight" class="file-upload-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14,2 14,8 20,8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10,9 9,9 8,9"></polyline>
                        </svg>
                        上傳文件
                    </label>
                    <span class="file-name" id="fileNameRight">未選擇文件</span>
                    <button type="button" class="clear-file-btn" id="clearFileRight" style="display: none;">✕</button>
                </div>
                <div class="code-editor" id="codeEditorRight">
                    <div class="line-numbers" id="lineNumbersRight"></div>
                    <div class="diff-highlight" id="diffHighlightRight"></div>
                    <textarea id="codeRight" placeholder="在此輸入程式碼或上傳文件..." spellcheck="false" autocorrect="off" autocapitalize="off"></textarea>
                </div>
            </div>
        </div>

        <div class="stats-section" id="statsSection" style="display: none;">
            <h3>比對統計</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">新增行數：</span>
                    <span class="stat-value added" id="addedLines">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">刪除行數：</span>
                    <span class="stat-value removed" id="removedLines">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">修改行數：</span>
                    <span class="stat-value modified" id="modifiedLines">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">相同行數：</span>
                    <span class="stat-value unchanged" id="unchangedLines">0</span>
                </div>
            </div>
        </div>

        <div class="diff-section" id="diffSection" style="display: none;">
            <div class="section-header">
                <h3>差異比對結果</h3>
                <div class="diff-controls">
                    <button id="copyDiffLeft" class="btn btn-sm btn-info">複製左側差異</button>
                    <button id="copyDiffRight" class="btn btn-sm btn-info">複製右側差異</button>
                    <button id="copyDiffBoth" class="btn btn-sm btn-primary">複製完整差異</button>
                </div>
            </div>
            <div class="diff-container">
                <div class="diff-panel">
                    <div class="panel-header">
                        <h4>程式碼 A</h4>
                        <button class="copy-diff-panel-btn" id="copyDiffPanelLeft" title="複製此面板的差異">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="diff-content" id="diffLeft"></div>
                </div>
                <div class="diff-panel">
                    <div class="panel-header">
                        <h4>程式碼 B</h4>
                        <button class="copy-diff-panel-btn" id="copyDiffPanelRight" title="複製此面板的差異">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="diff-content" id="diffRight"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
